store:
  # data-only container
  restart: always
  image: postgres:latest # reuse postgres container
  volumes:
      - /var/lib/postgresql/data
  command: "true"

#minio1:
#    image: minio/minio:edge
#    restart: always
#    ports:
#      - "9000:9000"
#    volumes:
#      - /mnt/export/minio1:/export
#    environment:
#      MINIO_ACCESS_KEY: minio
#      MINIO_SECRET_KEY: minio123
#    command: server minio1:/export

postgres:
  restart: always
  image: postgres:latest
  ports:
      - "5432" # random available host port will be chosen, same as -P
  volumes_from:
      - store # connect postgres and the data-only container
  environment:
      - POSTGRES_PASSWORD=mypass
      - POSTGRES_USER=postgres
      - POSTGRES_DATABASENAME=postgres
      # you can also set the postgres username and database name

go:
  restart: always
  build: ./api
  ports:
    - 8080:8080
  links:
    - postgres:db
#  environment:
#    - DB_NAME=project
#  volumes:
#        - ./api:/go/src/github.com/KanybekMomukeyev/goDockerCompose/api


