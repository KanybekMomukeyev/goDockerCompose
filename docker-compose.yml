store:
  # data-only container
  restart: always
  image: tobi312/rpi-postgresql:9.6 # reuse postgres container
  volumes:
      - /var/lib/postgresql/data
  command: "true"

postgres:
  restart: always
  image: tobi312/rpi-postgresql:9.6
  ports:
      - "5432" # random available host port will be chosen, same as -P
  volumes_from:
      - store # connect postgres and the data-only container
  environment:
        - POSTGRES_PASSWORD=nazgulum
        - POSTGRES_USER=kanybek
        - POSTGRES_DATABASENAME=databasename
      # you can also set the postgres username and database name

go:
  restart: always
  build: ./grpc
  ports:
    - 50051:50051
  links:
    - postgres:db